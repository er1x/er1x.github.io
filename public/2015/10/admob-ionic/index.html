<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Añadir publicidad es una de las formas más comunes de obtener ingresos (o como le dicen ahora, monetizar) de una aplicación. Una de las plataformas más comunes para ello es AdMob de Google.Es probable"><meta property="og:type" content="article"><meta property="og:title" content="Cómo añadir publicidad (AdMob) a una App en Ionic"><meta property="og:url" content="https://github.com/er1x/2015/10/admob-ionic/index.html"><meta property="og:site_name" content="Emilio J. Grande | Web Developer"><meta property="og:description" content="Añadir publicidad es una de las formas más comunes de obtener ingresos (o como le dicen ahora, monetizar) de una aplicación. Una de las plataformas más comunes para ello es AdMob de Google.Es probable"><meta property="og:image" content="https://github.com/er1x/images/2015-10/admob.jpg"><meta property="og:image" content="https://github.com/er1x/images/2015-10/start.png"><meta property="og:image" content="https://github.com/er1x/images/2015-10/extras.png"><meta property="og:image" content="https://github.com/er1x/images/2015-10/platform.png"><meta property="og:image" content="https://github.com/er1x/images/2015-10/emulador.png"><meta property="og:updated_time" content="2017-03-06T15:41:47.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Cómo añadir publicidad (AdMob) a una App en Ionic"><meta name="twitter:description" content="Añadir publicidad es una de las formas más comunes de obtener ingresos (o como le dicen ahora, monetizar) de una aplicación. Una de las plataformas más comunes para ello es AdMob de Google.Es probable"><meta name="twitter:image" content="https://github.com/er1x/images/2015-10/admob.jpg"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>Cómo añadir publicidad (AdMob) a una App en Ionic</title><style type="text/css">.content h1,.fa,body{-moz-osx-font-smoothing:grayscale}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased}.content h1,.content h2,.content strong{font-weight:700}.highlight,body,pre{font-family:Menlo,"Meslo LG",monospace}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-tag:before{content:"\f02b"}.fa-list:before{content:"\f03a"}.fa-chevron-up:before{content:"\f077"}.fa-bars:before{content:"\f0c9"}#header-post #toc .toc-level-2:before,.article-tag .tag-link:before,article .content h2:before{content:"#"}*,:after,:before{box-sizing:border-box}.content h1,body{-webkit-font-smoothing:antialiased}body{text-rendering:geometricPrecision}.my4{margin-top:4rem;margin-bottom:4rem}.mx-auto{margin-left:auto;margin-right:auto}.px2{padding-left:1rem;padding-right:1rem}.content h1{letter-spacing:.01em;font-size:1.5em;font-style:normal;color:#2bbc8a;margin-top:3rem;margin-bottom:1rem;display:block}.content h2{position:relative;font-size:1rem;text-transform:none;letter-spacing:normal;margin-top:2rem;margin-bottom:.5rem;color:#eee;display:block}#header-post #nav ul li{border-right:1px dotted #2bbc8a}.content em{font-style:italic}.content table{width:100%;font-size:12px;border-collapse:collapse;text-align:left}.content td{border-bottom:none;padding:9px 8px 0}html{height:100%;border-top:2px solid #c9cacc}body{line-height:1.725;color:#c9cacc;background-color:#1d1f21;font-size:14px;font-weight:400;min-height:100%;display:flex;flex-direction:column}.content{flex:1}.content p{-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.content pre{-moz-hyphens:manual;-ms-hyphens:manual;-webkit-hyphens:manual;hyphens:manual}.content a{text-decoration:none;color:#c9cacc;background-repeat:repeat-x;background-position:bottom;background-size:100% 6px;background-image:linear-gradient(transparent,transparent 5px,#c9cacc 5px,#c9cacc)}#header-post a,.content h2 a{color:inherit;background:0 0;text-decoration:none}#header-post #nav ul li:last-child a,#header-post ul li:last-child{margin-right:0}.width{width:100%;max-width:39rem}@media (max-width:480px){.my4{margin-top:2rem;margin-bottom:2rem}}#header-post #nav ul{line-height:15px}#header-post #nav{font-style:normal;font-weight:200;letter-spacing:.01em;font-size:.8rem;color:#2bbc8a}#header-post{position:fixed;top:2rem;right:2rem;display:inline-block;float:right}#header-post ol{list-style-type:none}#header-post ul{list-style-type:none;margin:0;padding:0;display:inline-block}#header-post ul li{margin-right:15px;display:inline-block;vertical-align:middle}#header-post #menu-icon,#header-post #menu-icon-tablet{float:right;margin-left:15px}#header-post #top-icon-tablet{margin-left:15px;bottom:2rem;right:2rem;position:fixed}#header-post #menu{visibility:hidden}#header-post #nav ul a{margin-right:15px;color:color-accent}#header-post #nav ul li:last-child{border-right:0;margin-right:0}#header-post #toc{clear:both;text-align:right;padding-top:1rem}#header-post #toc .toc-number{display:none}#header-post #toc .toc-level-2{font-size:.8rem;color:#c9cacc}#header-post #toc .toc-level-2:before{color:#2bbc8a}#header-post #toc .toc-level-4{font-size:.4rem;color:#666}@media screen and (max-width:500px){#header-post{display:none}}@media screen and (max-width:900px){#header-post #menu-icon{display:none}}@media screen and (max-width:1199px){#header-post #toc{display:none}}@media screen and (min-width:900px){#header-post #menu-icon-tablet,#header-post #top-icon-tablet{display:none!important}}#footer-post{bottom:0;left:0;right:0;position:fixed;width:100%;z-index:5000000;background:#212326;border-top:1px solid #666673}#footer-post a,#footer-post a.icon{background:0 0}#footer-post a{color:inherit;text-decoration:none}#footer-post #nav-footer{margin-left:1rem;margin-right:1rem;text-align:center}#footer-post #nav-footer a{color:#2bbc8a;font-size:1rem}#footer-post #actions-footer ul,#footer-post #nav-footer ul{list-style-type:none;margin:0;padding:0;display:table;width:100%}#footer-post #nav-footer ul li{display:inline-table;width:20%;padding:10px;vertical-align:middle}#footer-post #actions-footer{text-align:center;margin-top:1rem;margin-bottom:1rem;width:100%}#footer-post #actions-footer a{color:#2bbc8a}#footer-post #actions-footer ul li{display:table-cell;vertical-align:middle}#footer-post #toc-footer .toc-level-4,#footer-post #toc-footer .toc-number{display:none}#footer-post #toc-footer{clear:both;text-align:left;padding-top:1rem}#footer-post #toc-footer ol{list-style-type:none;padding-left:20px}#footer-post #toc-footer ol li{line-height:30px}#footer-post #toc-footer .toc-level-2{font-size:.8rem;color:#c9cacc}#footer-post #toc-footer .toc-level-2:before{content:"#";color:#2bbc8a}@media screen and (min-width:500px){#footer-post-container{display:none}}article header .posttitle{margin-top:0;margin-bottom:0;text-transform:none;font-size:1.5em;line-height:1.25}article header .meta{margin-top:0;margin-bottom:1rem}article header .meta *{color:#ccc;font-size:.85rem}article header .author{text-transform:uppercase;letter-spacing:.01em;font-weight:700}article header .postdate{display:inline}article .content h2:before{color:#2bbc8a;position:absolute;left:-1rem;top:-4px;font-size:1.2rem;font-weight:700}article .content img{max-width:100%;height:auto;display:block;margin:auto}.posttitle{text-transform:none;font-size:1.5em;line-height:1.25}@media (min-width:480px){p{text-align:justify}.article-tag{display:inline}.article-tag:before{content:"|"}}.highlight,pre{overflow-x:auto}pre{font-size:13px;padding:10px 15px 0;line-height:22px;-webkit-border-radius:4px;border-radius:4px;border:1px dotted #666}.highlight{color:#d1d9e1;background:#212326;-webkit-border-radius:4px;border-radius:4px;padding:10px 15px;margin:1rem 0}.highlight pre{padding:0;border:none;background:0 0}.highlight table{width:auto}.highlight td.gutter{text-align:right;padding-right:20px;display:none}</style></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" style="display:none"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archives">Writing</a></li><li><a href="/projects">Projects</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li></ul></span><br><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Iniciar-una-app-Ionic-en-blanco"><span class="toc-number">1.</span> <span class="toc-text">Iniciar una app Ionic en blanco</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Anadir-la-plataforma-movil-y-el-plugin-de-AdMob"><span class="toc-number">2.</span> <span class="toc-text">Añadir la plataforma móvil y el plugin de AdMob</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Codigo-para-agregar-AdMob"><span class="toc-number">3.</span> <span class="toc-text">Código para agregar AdMob</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#www-index-html"><span class="toc-number">3.0.1.</span> <span class="toc-text">www/index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#www-js-ads-js"><span class="toc-number">3.0.2.</span> <span class="toc-text">www/js/ads.js</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Probandolo-en-un-dispositivo"><span class="toc-number">4.</span> <span class="toc-text">Probándolo en un dispositivo</span></a></li></div></span></div><div class="content index width mx-auto px2 my4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Cómo añadir publicidad (AdMob) a una App en Ionic</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Emilio J. Grande | Web Developer</span></span><div class="postdate"><time datetime="2015-10-13T20:17:00.000Z" itemprop="datePublished">13-10-2015</time></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/admob/">admob</a>, <a class="tag-link" href="/tags/cordova/">cordova</a>, <a class="tag-link" href="/tags/ionic/">ionic</a>, <a class="tag-link" href="/tags/mobile/">mobile</a></div></div></header><div class="content" itemprop="articleBody"><p><img src="/images/2015-10/admob.jpg" alt="Ionic+adMob"></p><p>Añadir publicidad es una de las formas más comunes de obtener ingresos (o como le dicen ahora, monetizar) de una aplicación. Una de las plataformas más comunes para ello es <strong><a href="https://www.google.es/admob/" target="_blank" rel="external">AdMob</a> de Google</strong>.</p><p>Es probable que ya lo conozcas. Es esa barrita de publicidad que suele salir en la parte de abajo de las apps.</p><p>En Ionic, y por extensión, <strong>en una app híbrida hecha con Cordova, podemos hacer uso de AdMob</strong> mediante plugins. En este tutorial veremos cómo.</p><h2 id="Iniciar-una-app-Ionic-en-blanco"><a href="#Iniciar-una-app-Ionic-en-blanco" class="headerlink" title="Iniciar una app Ionic en blanco"></a>Iniciar una app Ionic en blanco</h2><p>Si no tienes instalado Ionic lo detallo un poco más en <a href="/2015/06/tutorial-ionic-parte-uno/">este tutorial</a>, pero básicamente es tener instalado Node.js y ejecutar <em>npm i -g cordova ionic</em>.</p><p>Con Ionic y Cordova listos, veamos rápidamente cómo crear un <strong>starter básico en blanco</strong>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic start admob-demo blank</div></pre></td></tr></table></figure><p><img src="/images/2015-10/start.png" alt="start"></p><h2 id="Anadir-la-plataforma-movil-y-el-plugin-de-AdMob"><a href="#Anadir-la-plataforma-movil-y-el-plugin-de-AdMob" class="headerlink" title="Añadir la plataforma móvil y el plugin de AdMob"></a>Añadir la plataforma móvil y el plugin de AdMob</h2><p>Para este ejemplo voy a utilizar Android.</p><p>Si quieres hacer lo mismo necesitarás tener el SDK de Android instalado, yo lo tengo con la API 5.1.1 y los siguientes extras:</p><p><img src="/images/2015-10/extras.png" alt="extras"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic platform add android</div></pre></td></tr></table></figure><p>Después <strong>agregamos el plugin de AdMob</strong>, en este caso voy a utilizar <a href="https://www.npmjs.com/package/cordova-plugin-admobpro" target="_blank" rel="external">este</a>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic plugin add cordova-plugin-admobpro</div></pre></td></tr></table></figure><p><img src="/images/2015-10/platform.png" alt="platform/plugin"></p><p>¡Listo! Ahora sólo hace falta agregar el código necesario para que la barrita de publicidad aparezca en la parte de abajo.</p><h2 id="Codigo-para-agregar-AdMob"><a href="#Codigo-para-agregar-AdMob" class="headerlink" title="Código para agregar AdMob"></a>Código para agregar AdMob</h2><p>Vamos a tocar dos ficheros, de la siguiente manera:</p><ul><li><strong>www/index.html</strong>: agregaremos una referencia a un script nuevo en el que incluiremos nuestro código para AdMob, llamado <em>ads.js</em>.</li><li><strong>www/js/ads.js</strong>: aquí es donde irá la <em>chicha</em> del asunto.</li></ul><p><br></p><h4 id="www-index-html"><a href="#www-index-html" class="headerlink" title="www/index.html"></a>www/index.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">    <span class="comment">&lt;!-- your app's js --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- the admob code --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/ads.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure><p>Simplemente añadimos el script ads.js. No hay más.</p><p><br></p><h4 id="www-js-ads-js"><a href="#www-js-ads-js" class="headerlink" title="www/js/ads.js"></a>www/js/ads.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> admobData = &#123;&#125;;</div><div class="line"></div><div class="line">  <span class="comment">// Determine platform</span></div><div class="line">  <span class="keyword">if</span> (<span class="regexp">/(android)/i</span>.test(navigator.userAgent)) &#123;</div><div class="line">    admobData = &#123;</div><div class="line">        <span class="attr">banner</span>: <span class="string">'ca-app-pub-1817269486258695/6892783564'</span></div><div class="line">    &#125;;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/(ipod|iphone|ipad)/i</span>.test(navigator.userAgent)) &#123;</div><div class="line">    admobData = &#123;</div><div class="line">        <span class="attr">banner</span>: <span class="string">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div><div class="line">    &#125;;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    admobData = &#123;</div><div class="line">        <span class="attr">banner</span>: <span class="string">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setBanner</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (AdMob) &#123;</div><div class="line">        AdMob.createBanner(&#123;</div><div class="line">            <span class="attr">adId</span> : admobData.banner,</div><div class="line">            <span class="attr">position</span> : AdMob.AD_POSITION.BOTTOM_CENTER,</div><div class="line">            <span class="attr">autoShow</span> : <span class="literal">true</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">'deviceready'</span>, setBanner, <span class="literal">false</span>);</div><div class="line">&#125;());</div></pre></td></tr></table></figure><p>Veamos con un poco más de detalle qué se hace aquí:</p><ul><li><p>En el primer bloque de código, <strong>se examina el <em>user agent</em> del navegador para determinar la plataforma de ejecución</strong>. Android, IOS u otros.<br>Dependiendo de la que sea se rellena un objeto <em>admobData</em> con el <strong>ID de AdMob</strong> apropiado.</p><p>Tú tendrás que <strong>reemplazar este ID con el de tu cuenta</strong>. El ID <strong>nos lo proporciona Google al crear la cuenta de Admob</strong>.</p></li><li><p>Definimos una función, <em>setBanner</em>, que utiliza el plugin para crear el banner con nuestro ID de Admob que va en <em>admobData</em>.</p></li><li><p>Utilizamos el evento que proporciona Cordova, <strong>deviceready</strong>, para definir la función <em>setBanner</em> como callback, que se disparará cuando el dispositivo esté listo.</p></li></ul><h2 id="Probandolo-en-un-dispositivo"><a href="#Probandolo-en-un-dispositivo" class="headerlink" title="Probándolo en un dispositivo"></a>Probándolo en un dispositivo</h2><p>Vamos a probar el invento. Para ello yo utilizaré <a href="https://www.genymotion.com/#!/" target="_blank" rel="external">Genymotion</a>, pero puedes utilizar otro emulador o un dispositivo físico.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic run android</div></pre></td></tr></table></figure><p>¡Y listo!</p><p><img src="/images/2015-10/emulador.png" alt="emulador"></p><hr><p><strong>Con esto puedes añadir publicidad de forma sencilla</strong> a una aplicación híbrida. No solo Ionic, sino <strong>cualquiera hecha con Cordova/Phonegap</strong>.</p><p>Por supuesto <strong>existen muchos sistemas de monetización</strong>, que ofrecen librerías similares que puedes utilizar si Admob no te convence.</p><p>Espero que te sea útil :)</p></div></article></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/archives">Writing</a></li><li><a href="/projects">Projects</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Iniciar-una-app-Ionic-en-blanco"><span class="toc-number">1.</span> <span class="toc-text">Iniciar una app Ionic en blanco</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Anadir-la-plataforma-movil-y-el-plugin-de-AdMob"><span class="toc-number">2.</span> <span class="toc-text">Añadir la plataforma móvil y el plugin de AdMob</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Codigo-para-agregar-AdMob"><span class="toc-number">3.</span> <span class="toc-text">Código para agregar AdMob</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#www-index-html"><span class="toc-number">3.0.1.</span> <span class="toc-text">www/index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#www-js-ads-js"><span class="toc-number">3.0.2.</span> <span class="toc-text">www/js/ads.js</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Probandolo-en-un-dispositivo"><span class="toc-number">4.</span> <span class="toc-text">Probándolo en un dispositivo</span></a></li></div><div id="actions-footer"><ul><li id="toc"><a class="icon" href="#actions-footer"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li><li id="top" style="display:none"><a class="icon" href="#"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li><li id="menu"><a class="icon" href="#actions-footer"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li></ul></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2017 Emilio J. Grande</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archives">Writing</a></li><li><a href="/projects">Projects</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li></ul></nav></div></footer><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/meslo-LG/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/js/main.js"></script></body></html>